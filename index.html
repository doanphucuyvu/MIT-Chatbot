<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot CLB MIT</title>
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body, html {
      width: 100%;
      height: 100%;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: background 0.4s, color 0.4s;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
    }

    :root {
      --bg: #eef2f3;
      --text: #111;
      --glass-bg: rgba(255, 255, 255, 0.25);
      --glass-border: rgba(255, 255, 255, 0.5);
      --primary: #ff4d4d;
      --secondary: #ff99aa;
      --accent: #0072ff;
    }
    body.dark {
      --bg: #1a1a1a;
      --text: #f0f0f0;
      --glass-bg: rgba(0, 0, 0, 0.25);
      --glass-border: rgba(255, 255, 255, 0.2);
      --primary: #cc3d3d;
      --secondary: #cc7a88;
    }

    #container {
      display: flex;
      width: 100vw;
      height: 100vh;
    }

    /* C·ªôt tr√°i */
    #left {
      width: 25%;
      border-right: 1px solid #ccc;
      background: linear-gradient(180deg, var(--primary), var(--secondary));
      display: flex;
      flex-direction: column;
      transition: width 0.3s ease;
      overflow: hidden;
      position: relative;
      z-index: 10;
    }
    #left.collapsed { width: 50px; }

    #left h3 { 
      text-align: center; 
      margin: 15px 0; 
      color: white; 
      transition: opacity 0.3s;
      font-size: 1.2rem;
      padding: 0 10px;
    }
    #left.collapsed h3, 
    #left.collapsed #questions { 
      opacity: 0; 
      pointer-events: none; 
    }

    #search-container {
      padding: 10px;
      position: relative;
    }

    #search-input {
      width: 100%;
      padding: 10px 15px;
      border-radius: 20px;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      backdrop-filter: blur(10px);
    }

    #search-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    #questions { 
      flex: 1; 
      overflow-y: auto; 
      padding: 10px;
      scrollbar-width: thin;
    }
    #questions::-webkit-scrollbar {
      width: 5px;
    }
    #questions::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
    }

    details {
      margin-bottom: 10px;
      transition: all 0.3s ease;
    }
    details[open] {
      margin-bottom: 15px;
    }
    details summary {
      font-size: 15px;
      margin: 10px 0;
      cursor: pointer;
      font-weight: bold;
      border-bottom: 1px solid rgba(255,255,255,0.5);
      padding: 8px 0;
      color: white;
      display: flex;
      align-items: center;
    }
    details summary::after {
      content: '‚ñº';
      font-size: 0.8em;
      margin-left: auto;
      transition: transform 0.3s ease;
    }
    details[open] summary::after {
      transform: rotate(180deg);
    }
    details button {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border: none;
      cursor: pointer;
      text-align: left;
      border-radius: 12px;
      transition: all 0.25s ease;
      color: var(--text);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      font-size: 14px;
    }
    details button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
      background: rgba(255, 255, 255, 0.4);
    }

    /* C·ªôt gi·ªØa */
    #middle {
      flex: 1;
      background: var(--bg);
      display: flex;
      flex-direction: column;
      border-right: 1px solid #ccc;
      position: relative;
    }
    #middle h3 {
      text-align: center;
      margin: 15px 0;
      color: var(--text);
      font-size: 1.4rem;
    }
    #chat {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      scrollbar-width: thin;
    }
    #chat::-webkit-scrollbar {
      width: 8px;
    }
    #chat::-webkit-scrollbar-thumb {
      background: rgba(0, 0, 0, 0.2);
      border-radius: 10px;
    }
    .message {
      margin: 15px 0;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      animation: fadeIn 0.4s ease;
    }
    .message.user {
      flex-direction: row-reverse;
    }
    .avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .avatar.bot {
      background: linear-gradient(135deg, #00c6ff, var(--accent));
    }
    .avatar.user {
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    }
    .bubble {
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 80%;
      animation: slideIn 0.4s ease;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      line-height: 1.5;
    }
    .message.user .bubble {
      border-top-right-radius: 4px;
      background: rgba(173, 216, 230, 0.3);
    }
    .message.bot .bubble {
      border-top-left-radius: 4px;
    }
    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Hi·ªáu ·ª©ng nh·∫•p nh√°y */
    .blink { animation: blink 1s infinite; }
    @keyframes blink {
      0%, 50%, 100% { opacity: 1; }
      25%, 75% { opacity: 0.3; }
    }

    /* Form nh·∫≠p tin nh·∫Øn */
    #chat-form {
      display: flex;
      padding: 15px;
      background: var(--bg);
      border-top: 1px solid #ccc;
      position: relative;
    }
    #user-input {
      flex: 1;
      padding: 12px 15px;
      border-radius: 24px;
      border: 1px solid #ccc;
      background: var(--glass-bg);
      color: var(--text);
      font-size: 15px;
      outline: none;
      transition: all 0.3s ease;
    }
    #user-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(0, 114, 255, 0.2);
    }
    #suggestions {
      position: absolute;
      bottom: 100%;
      left: 15px;
      right: 15px;
      background: var(--bg);
      border: 1px solid #ccc;
      border-radius: 12px;
      max-height: 150px;
      overflow-y: auto;
      display: none;
      z-index: 100;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .suggestion-item {
      padding: 10px 15px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .suggestion-item:hover {
      background: rgba(0,0,0,0.05);
    }
    #chat-form button {
      margin-left: 10px;
      padding: 10px 20px;
      border-radius: 24px;
      border: none;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    #chat-form button:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* C·ªôt ph·∫£i */
    #right {
      width: 25%;
      background: linear-gradient(180deg, var(--primary), var(--secondary));
      display: flex;
      flex-direction: column;
      transition: width 0.3s ease;
      overflow: hidden;
      padding-top: 60px; /* ƒë·ªÉ tr√°nh b·ªã che */
    }
    #right.collapsed { 
      width: 50px; 
      padding-top: 60px; 
    }
    #right h3 { 
      text-align: center; 
      margin: 15px 0; 
      color: white; 
      transition: opacity 0.3s;
      font-size: 1.2rem;
    }
    #right.collapsed h3, 
    #right.collapsed #history, 
    #right.collapsed #clearHistory { 
      opacity: 0; 
      pointer-events: none; 
    }

    #history { 
      flex: 1; 
      overflow-y: auto; 
      padding: 10px;
      scrollbar-width: thin;
    }
    #history::-webkit-scrollbar {
      width: 5px;
    }
    #history::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
    }
    #history button, #clearHistory {
      width: 100%;
      padding: 12px;
      margin: 5px 0;
      border: none;
      cursor: pointer;
      border-radius: 12px;
      transition: all 0.25s ease;
      color: var(--text);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      text-align: left;
      font-size: 14px;
    }
    #history button:hover, #clearHistory:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
      background: rgba(255, 255, 255, 0.4);
    }

    /* Thanh c√¥ng c·ª• n·ªïi */
    #topbar {
      position: fixed;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 10px;
      z-index: 1000;
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .tool-btn {
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.3);
      border: 1px solid var(--glass-border);
      color: var(--text);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .tool-btn:hover { 
      transform: scale(1.05); 
      background: rgba(255, 255, 255, 0.5);
    }

    /* Mobile layout */
    body.mobile-layout #container { 
      flex-direction: column; 
    }
    body.mobile-layout #left,
    body.mobile-layout #right {
      width: 100%;
      height: auto;
      max-height: 40vh;
      order: 2;
      padding-top: 0;
    }
    body.mobile-layout #middle {
      order: 1;
      width: 100%;
      height: 60vh;
    }
    body.mobile-layout #left.collapsed,
    body.mobile-layout #right.collapsed {
      width: 100%;
      height: 50px;
      overflow: hidden;
    }

    /* Hi·ªáu ·ª©ng t·∫£i */
    .loader {
      display: inline-block;
      width: 12px;
      height: 12px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Hi·ªáu ·ª©ng cho c√°c n√∫t ƒë√£ nh·∫•n */
    button:active {
      transform: scale(0.95) !important;
    }

    /* Toast th√¥ng b√°o */
    .toast {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s;
    }
    .toast.show {
      opacity: 1;
    }

    /* T·ªëi ∆∞u cho mobile */
    @media (max-width: 768px) {
      .bubble {
        max-width: 85%;
        font-size: 14px;
        padding: 10px 14px;
      }
      
      #user-input {
        padding: 10px 14px;
        font-size: 14px;
      }
      
      #chat-form button {
        padding: 8px 16px;
        font-size: 14px;
      }
      
      .avatar {
        width: 36px;
        height: 36px;
        font-size: 18px;
      }
      
      #topbar {
        top: 5px;
        right: 5px;
        gap: 5px;
        padding: 6px;
      }
      
      .tool-btn {
        padding: 6px 10px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <!-- Thanh c√¥ng c·ª• c·ªë ƒë·ªãnh g√≥c tr√™n b√™n ph·∫£i -->
  <div id="topbar">
    <button id="mobileBtn" class="tool-btn" onclick="toggleMobileLayout()" title="Chuy·ªÉn ƒë·ªïi ch·∫ø ƒë·ªô mobile">üì±</button>
    <button class="tool-btn" onclick="toggleDarkMode()" title="Ch·∫ø ƒë·ªô s√°ng/t·ªëi">üåô</button>
    <button class="tool-btn" onclick="toggleLeft()" title="·∫®n/hi·ªán c√¢u h·ªèi">‚ùì</button>
    <button class="tool-btn" onclick="toggleRight()" title="·∫®n/hi·ªán l·ªãch s·ª≠">üìö</button>
    <button class="tool-btn" onclick="speakCurrentMessage()" title="ƒê·ªçc tin nh·∫Øn">üîä</button>
  </div>

  <div id="container">
    <!-- C·ªôt tr√°i -->
    <div id="left">
      <h3>C√¢u h·ªèi th∆∞·ªùng g·∫∑p</h3>
      <div id="search-container">
        <input type="text" id="search-input" placeholder="T√¨m ki·∫øm c√¢u h·ªèi..." oninput="filterQuestions()">
      </div>
      <div id="questions">

        <details open>
          <summary>üè´ T·ªîNG QUAN</summary>
          <button onclick="askQuestion('Gi·ªõi thi·ªáu chung v·ªÅ CLB MIT')">Gi·ªõi thi·ªáu chung v·ªÅ CLB MIT</button>
          <button onclick="askQuestion('√ù nghƒ©a t√™n g·ªçi MIT')">√ù nghƒ©a t√™n g·ªçi MIT</button>
          <button onclick="askQuestion('Th√¥ng tin li√™n h·ªá')">Th√¥ng tin li√™n h·ªá</button>
        </details>

        <details>
          <summary>üöÄ S·ª® M·ªÜNH V√Ä T·∫¶M NH√åN</summary>
          <button onclick="askQuestion('S·ª© m·ªánh')">S·ª© m·ªánh</button>
          <button onclick="askQuestion('T·∫ßm nh√¨n')">T·∫ßm nh√¨n</button>
        </details>

        <details>
          <summary>üß© M√î H√åNH T·ªî CH·ª®C</summary>
          <button onclick="askQuestion('Ban ƒëi·ªÅu h√†nh')">Ban ƒëi·ªÅu h√†nh</button>
          <button onclick="askQuestion('C√°c ph√¢n ban')">C√°c ph√¢n ban</button>
          <button onclick="askQuestion('Th√†nh vi√™n trong t·ª´ng ban')">Th√†nh vi√™n trong t·ª´ng ban</button>
        </details>

        <details>
          <summary>üìú QUY ƒê·ªäNH CHUNG</summary>
          <button onclick="askQuestion('T√™n g·ªçi')">T√™n g·ªçi</button>
          <button onclick="askQuestion('T√¥n ch·ªâ, m·ª•c ƒë√≠ch')">T√¥n ch·ªâ, m·ª•c ƒë√≠ch</button>
        </details>

        <details>
          <summary>üõ†Ô∏è CH·ª®C NƒÇNG V√Ä NHI·ªÜM V·ª§</summary>
          <button onclick="askQuestion('Ch·ª©c nƒÉng')">Ch·ª©c nƒÉng</button>
          <button onclick="askQuestion('Nhi·ªám v·ª•')">Nhi·ªám v·ª•</button>
        </details>

        <details>
          <summary>üí∞ C√îNG T√ÅC T√ÄI CH√çNH</summary>
          <button onclick="askQuestion('T√†i ch√≠nh')">T√†i ch√≠nh</button>
        </details>

        <details>
          <summary>üèÜ KHEN TH∆Ø·ªûNG, K·ª∂ LU·∫¨T</summary>
          <button onclick="askQuestion('Khen th∆∞·ªüng')">Khen th∆∞·ªüng</button>
          <button onclick="askQuestion('K·ª∑ lu·∫≠t')">K·ª∑ lu·∫≠t</button>
        </details>

        <details>
          <summary>üë• H·ªòI VI√äN</summary>
          <button onclick="askQuestion('Ti√™u chu·∫©n H·ªôi vi√™n')">Ti√™u chu·∫©n H·ªôi vi√™n</button>
          <button onclick="askQuestion('Quy·ªÅn l·ª£i c·ªßa H·ªôi vi√™n')">Quy·ªÅn l·ª£i c·ªßa H·ªôi vi√™n</button>
          <button onclick="askQuestion('Nghƒ©a v·ª• c·ªßa H·ªôi vi√™n')">Nghƒ©a v·ª• c·ªßa H·ªôi vi√™n</button>
          <button onclick="askQuestion('ƒêƒÉng k√Ω l√†m H·ªôi vi√™n')">ƒêƒÉng k√Ω l√†m H·ªôi vi√™n</button>
          <button onclick="askQuestion('R√∫t, x√≥a t√™n kh·ªèi CLB')">R√∫t, x√≥a t√™n kh·ªèi CLB</button>
        </details>

        <details>
          <summary>üìë GI·∫§Y T·ªú LI√äN QUAN</summary>
          <button onclick="askQuestion('ƒê∆°n ƒëƒÉng k√≠ tham gia CLB')">ƒê∆°n ƒëƒÉng k√≠ tham gia CLB</button>
          <button onclick="askQuestion('ƒê∆°n xin r√∫t kh·ªèi CLB')">ƒê∆°n xin r√∫t kh·ªèi CLB</button>
          <button onclick="askQuestion('N·ªôi quy CLB MIT')">N·ªôi quy CLB MIT</button>
        </details>

        <details>
          <summary>üéüÔ∏è C√ÅCH THAM GIA CLB</summary>
          <button onclick="askQuestion('C√°ch tham gia CLB MIT')">C√°ch tham gia CLB MIT</button>
        </details>

      </div>
    </div>

    <!-- C·ªôt gi·ªØa -->
    <div id="middle">
      <h3>MIT GPT</h3>
      <div id="chat"></div>
      <form id="chat-form">
        <input type="text" id="user-input" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n..." autocomplete="off">
        <div id="suggestions"></div>
        <button type="submit">G·ª≠i</button>
      </form>
    </div>

    <!-- C·ªôt ph·∫£i -->
    <div id="right">
      <h3>L·ªãch s·ª≠ tr√≤ chuy·ªán</h3>
      <div id="history"></div>
      <button id="clearHistory" onclick="clearHistory()">X√≥a l·ªãch s·ª≠ & Chat</button>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const chat = document.getElementById('chat');
    const historyDiv = document.getElementById('history');
    const left = document.getElementById('left');
    const right = document.getElementById('right');
    const mobileBtn = document.getElementById('mobileBtn');
    const chatForm = document.getElementById('chat-form');
    const userInput = document.getElementById('user-input');
    const searchInput = document.getElementById('search-input');
    const suggestions = document.getElementById('suggestions');
    let history = JSON.parse(localStorage.getItem("chatHistory")) || [];
    let synth = window.speechSynthesis;
    let currentUtterance = null;

    const answers = {
      "Gi·ªõi thi·ªáu chung v·ªÅ CLB MIT": "C√¢u l·∫°c b·ªô C√¥ng ngh·ªá Th√¥ng tin tr∆∞·ªùng THPT MyÃÉ ƒêiÃÄnh (MIT) ƒë∆∞·ª£c th√†nh l·∫≠p v·ªõi  m·ª•c ti√™u ph√°t tri·ªÉn t∆∞ duy c√¥ng ngh·ªá theo h∆∞·ªõng ƒë·ªïi m·ªõi,  s√°ng t·∫°o, g·∫ßn g≈©i v√† gi√†u c√° t√≠nh c·ªßa th·∫ø h·ªá tr·∫ª. MIT  kh√¥ng ch·ªâ t·∫≠p trung v√†o l·∫≠p tr√¨nh ph√°t tri·ªÉn c√°c k·ªπ nƒÉng tin h·ªçc m√† c√≤n g√≥p ph·∫ßn kh∆°i d·∫≠y kh·∫£ nƒÉng kh√°m ph√°, th·ª≠ th√°ch gi·ªõi h·∫°n b·∫£n th√¢n, bi·∫øn nh·ªØng ki·∫øn th·ª©c t∆∞·ªüng ch·ª´ng kh√¥ khan tr·ªü n√™n s·ªëng ƒë·ªông, th√∫ v·ªã v√† ƒë·∫ßy m√†u s·∫Øc d∆∞·ªõi lƒÉng k√≠nh nƒÉng ƒë·ªông, nhi·ªát huy·∫øt c·ªßa tu·ªïi tr·∫ª. Th√¥ng qua c√°c ho·∫°t ƒë·ªông t∆∞∆°ng t√°c xoay quanh nh·ªØng ch·ªß ƒë·ªÅ c√¥ng ngh·ªá th√¥ng tin, MyDinh Information Technology Club hy v·ªçng s·∫Ω l√† n∆°i t·∫°o ƒëi·ªÅu ki·ªán ƒë·ªÉ m·ªói ng∆∞·ªùi th·ªÉ hi·ªán g√≥c nh√¨n c√° nh√¢n, r√®n luy·ªán t∆∞ duy c√¥ng ngh·ªá v√† ph√° b·ªè r√†o c·∫£n ti·∫øp c·∫≠n tri th·ª©c.",
      "√ù nghƒ©a t√™n g·ªçi MIT": "T√™n ti·∫øng Vi·ªát: C√¢u l·∫°c b·ªô C√¥ng ngh·ªá Th√¥ng tin.T√™n ti·∫øng Anh: MIT - MyDinh Information Technology Club. MIT kh√¥ng ch·ªâ l√† m·ªôt c√°i t√™n ƒë·∫°i di·ªán cho CLB, n√≥ c√≤n mang √Ω nghƒ©a ‚Äúkh√°m ph√° c√¥ng ngh·ªá‚Äù ‚Äì kh√¥ng ch·ªâ th·ªÉ hi·ªán ni·ªÅm ƒëam m√™ l·∫≠p tr√¨nh, c√¥ng ngh·ªá m√† c√≤n ƒë·∫°i di·ªán cho tu·ªïi tr·∫ª nƒÉng ƒë·ªông, s√°ng t·∫°o v√† ƒë·∫ßy nhi·ªát huy·∫øt.  Tin h·ªçc kh√¥ng ch·ªâ l√† n∆°i h·ªçc h·ªèi k·ªπ nƒÉng m·ªõi, m√† c√≤n l√† kh√¥ng gian ƒë·ªÉ m·ªói th√†nh vi√™n th·ªèa s·ª©c s√°ng t·∫°o, k·∫øt n·ªëi v√† truy·ªÅn c·∫£m h·ª©ng cho nhau, tr√†n ƒë·∫ßy s·ª± nhi·ªát t√¨nh v√† s·ª©c s·ªëng c·ªßa th·ªùi thanh xu√¢n.",
      "Th√¥ng tin li√™n h·ªá": "Fanpage: https://www.facebook.com/mydinhitclub/; Gmail: mydinhitclub@gmail.com",

      "S·ª© m·ªánh": "T·∫°o d·ª±ng m√¥i tr∆∞·ªùng h·ªçc t·∫≠p, chia s·∫ª v√† giao l∆∞u l√†nh m·∫°nh, n∆°i c√°c th√†nh vi√™n c√πng nhau r√®n luy·ªán k·ªπ nƒÉng tin h·ªçc, l·∫≠p tr√¨nh v√† ·ª©ng d·ª•ng c√¥ng ngh·ªá th√¥ng tin v√†o ƒë·ªùi s·ªëng, h·ªçc t·∫≠p. N√¢ng cao t∆∞ duy logic, kh·∫£ nƒÉng s√°ng t·∫°o trong lƒ©nh v·ª±c c√¥ng ngh·ªá, ƒë·ªìng th·ªùi b·ªìi d∆∞·ª°ng nƒÉng l·ª±c gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ v√† k·ªπ nƒÉng l√†m vi·ªác nh√≥m. Trang b·ªã n·ªÅn t·∫£ng ki·∫øn th·ª©c v√† k·ªπ nƒÉng s·ªë c·∫ßn thi·∫øt, gi√∫p c√°c th√†nh vi√™n t·ª± tin h·ªôi nh·∫≠p, b·∫Øt k·ªãp xu h∆∞·ªõng chuy·ªÉn ƒë·ªïi s·ªë v√† s·ª± ph√°t tri·ªÉn m·∫°nh m·∫Ω c·ªßa k·ª∑ nguy√™n c√¥ng ngh·ªá 4.0.",
      "T·∫ßm nh√¨n": "-	Th√¥ng qua c√°c ho·∫°t ƒë·ªông, d·ª± √°n v√† cu·ªôc thi, CLB kh∆°i d·∫≠y ni·ªÅm y√™u th√≠ch c√¥ng ngh·ªá v√† tin h·ªçc, t·∫°o c∆° h·ªôi cho h·ªçc sinh ti·∫øp c·∫≠n tr·ª±c ti·∫øp, r√®n luy·ªán k·ªπ nƒÉng qua th·ª±c h√†nh v√† tr·∫£i nghi·ªám th·ª±c t·∫ø.  -	Ph·ªëi h·ª£p v·ªõi nh√† tr∆∞·ªùng trong vi·ªác x√¢y d·ª±ng c√°c chuy√™n ƒë·ªÅ v·ªÅ c√¥ng ngh·ªá, l·∫≠p tr√¨nh v√† ·ª©ng d·ª•ng tin h·ªçc, mang ƒë·∫øn nhi·ªÅu h√¨nh th·ª©c h·ªçc t·∫≠p s√°ng t·∫°o, d·ªÖ ti·∫øp c·∫≠n cho h·ªçc sinh trong v√† ngo√†i tr∆∞·ªùng.  -	H√¨nh th√†nh c√°c nh√≥m nghi√™n c·ª©u nh·ªè, n∆°i h·ªçc sinh c√≥ th·ªÉ ph√°t tri·ªÉn √Ω t∆∞·ªüng, c√πng nhau s√°ng t·∫°o, nghi√™n c·ª©u v√† th·ª≠ s·ª©c trong c√°c lƒ©nh v·ª±c c√¥ng ngh·ªá n·∫±m trong kh·∫£ nƒÉng v√† s·ªü th√≠ch c·ªßa b·∫£n th√¢n.",

      "Ban ƒëi·ªÅu h√†nh": "Ch·ªß t·ªãch: ƒêo√†n Ph√∫c Uy V≈© ‚Äì K5A8 ‚Äì 0842522010; Ph√≥ Ch·ªß t·ªãch: Nguy·ªÖn ƒê·ªó Tr√† My - K4A2 - 0981552706",
      "C√°c ph√¢n ban": "-	Ban Chuy√™n M√¥n: +) Ph√¢n ban Office: ƒê·∫£m nh·∫≠n chuy√™n m√¥n c√°c n·ªÅn t·∫£ng Word, Excel, PowerPoint, thi·∫øt k·∫ø slide. +) Ph√¢n ban L·∫≠p tr√¨nh: ƒêƒÉm nh·∫≠n nhi·ªám v·ª• l·∫≠p tr√¨nh web c∆° b·∫£n, Python, mini game, ·ª©ng d·ª•ng h·ªçc t·∫≠p. +) Ph√¢n ban Tr√≠ tu·ªá nh√¢n t·∫°o (AI): T√¨m hi·ªÉu AI c∆° b·∫£n, s·ª≠ d·ª•ng AI trong h·ªçc t·∫≠p v√† s√°ng t·∫°o n·ªôi dung (chatbot, AI image, AI video). +) Ph√¢n ban Multimedia: D·ª±ng video (CapCut, Canva). -	Ban H·∫≠u C·∫ßn: +) Ph√¢n ban Truy·ªÅn th√¥ng: Thi·∫øt k·∫ø poster, qu·∫£n l√Ω fanpage c√¢u l·∫°c b·ªô, qu·∫£ng b√° s·ª± ki·ªán. +) Ph√¢n ban T√†i ch√≠nh ‚Äì H·∫≠u c·∫ßn: Qu·∫£n l√Ω c√°c ho·∫°t ƒë·ªông t√†i ch√≠nh, l·∫≠p ng√¢n s√°ch, qu·∫£n l√Ω qu·ªπ v√† t√¨m c√°c nh√† t√†i tr·ª£ cho ho·∫°t ƒë·ªông c·ªßa MIT.",
      "Th√†nh vi√™n trong t·ª´ng ban": "C·∫≠p nh·∫≠t sau",

      "T√™n g·ªçi": "1.	T√™n Ti·∫øng Vi·ªát:  C√¢u l·∫°c b·ªô C√¥ng ngh√™Ã£ Th√¥ng tin      2.	T√™n Ti·∫øng Anh: MyDinh Information Technology Club     3.	T√™n vi·∫øt t·∫Øt: MIT",
      "T√¥n ch·ªâ, m·ª•c ƒë√≠ch": "I)	M·ª•c ƒë√≠ch.  -	M·ª•c ƒë√≠ch chung: MyDinh IT ƒë∆∞·ª£c th√†nh l·∫≠p v·ªõi m·ª•c ti√™u t·∫°o ra m·ªôt kh√¥ng gian sinh ho·∫°t tho·∫£i m√°i, t·ª± do s√°ng t·∫°o v√† g·∫Øn k·∫øt c·ªông ƒë·ªìng h·ªçc sinh c√≥ ƒëam m√™ c√¥ng ngh·ªá, mong mu·ªën r√®n luy·ªán k·ªπ nƒÉng tin h·ªçc v√† kh√°m ph√° s√¢u h∆°n v·ªÅ c√°c lƒ©nh v·ª±c li√™n quan ƒë·∫øn c√¥ng ngh·ªá th√¥ng tin.    -	M·ª•c ƒë√≠ch c·ª• th·ªÉ: CLB h∆∞·ªõng t·ªõi m√¥ h√¨nh h·ªçc t·∫≠p g·∫Øn v·ªõi t∆∞ duy c√¥ng ngh·ªá v√† k·ªπ nƒÉng s·ªë, gi√∫p h·ªçc sinh ti·∫øp c·∫≠n nhi·ªÅu h∆°n v·ªõi c√°c ph∆∞∆°ng ph√°p h·ªçc t·∫≠p hi·ªán ƒë·∫°i, t·ª´ ƒë√≥ ph√°t tri·ªÉn b·∫£n th√¢n theo h∆∞·ªõng t√≠ch c·ª±c, s√°ng t·∫°o v√† h·ªôi nh·∫≠p v·ªõi k·ª∑ nguy√™n c√¥ng ngh·ªá 4.0.  II)	T√¥n ch·ªâ -	L√† n∆°i h·ªçc t·∫≠p, s√°ng t·∫°o v√† th·ª±c h√†nh qua c√°c d·ª± √°n l·∫≠p tr√¨nh, thi·∫øt k·∫ø, hay ·ª©ng d·ª•ng c√¥ng ngh·ªá m√† tr√™n l·ªõp h·ªçc ch√≠nh kh√≥a th∆∞·ªùng ch∆∞a c√≥ nhi·ªÅu th·ªùi gian ƒë·ªÉ tr·∫£i nghi·ªám. -	T·∫°o ra m·ªôt m√¥i tr∆∞·ªùng sinh ho·∫°t l√†nh m·∫°nh, b·ªï √≠ch, g√≥p ph·∫ßn l√†m m·ªõi suy nghƒ© c·ªßa m·ªçi ng∆∞·ªùi, bi·∫øn tin h·ªçc v√† c√¥ng ngh·ªá ‚Äì v·ªën t∆∞·ªüng ch·ª´ng kh√¥ khan ‚Äì tr·ªü n√™n th√∫ v·ªã, g·∫ßn g≈©i v√† ƒë·∫ßy c·∫£m h·ª©ng.",
      "Ch·ª©c nƒÉng": "-	C√¢u l·∫°c b·ªô Tin h·ªçc s·∫Ω cung c·∫•p nh·ªØng ki·∫øn th·ª©c b·ªï √≠ch, th√∫ v·ªã v·ªÅ c√¥ng ngh·ªá, l·∫≠p tr√¨nh v√† ·ª©ng d·ª•ng tin h·ªçc; ƒë·ªìng th·ªùi t·ªï ch·ª©c c√°c ho·∫°t ƒë·ªông tr·∫£i nghi·ªám, d·ª± √°n th·ª±c h√†nh v√† tr∆∞ng b√†y s·∫£n ph·∫©m c√¥ng ngh·ªá ƒë·ªÉ thu h√∫t h·ªçc sinh h·ªçc h·ªèi, ƒë√†o s√¢u ki·∫øn th·ª©c. -	G√≥p ph·∫ßn qu·∫£ng b√° h√¨nh ·∫£nh c·ªßa CLB c≈©ng nh∆∞ x√¢y d·ª±ng ƒë·ªãnh h∆∞·ªõng ph√°t tri·ªÉn theo c√°c ph∆∞∆°ng ph√°p h·ªçc t·∫≠p hi·ªán ƒë·∫°i, hi·ªáu qu·∫£ v√† l√†nh m·∫°nh, gi√∫p h·ªçc sinh r√®n luy·ªán k·ªπ nƒÉng s·ªë v√† kh∆°i g·ª£i ni·ªÅm ƒëam m√™ c√¥ng ngh·ªá.",
      "Nhi·ªám v·ª•": "-	R√®n luy·ªán k·ªπ nƒÉng tin h·ªçc th·ª±c ti·ªÖn v√† s√°ng t·∫°o n·ªôi dung cho th√†nh vi√™n. -	Ti·∫øp c·∫≠n AI ‚Äì c√¥ng ngh·ªá m·ªõi theo c√°ch ƒë∆°n gi·∫£n, ·ª©ng d·ª•ng v√†o h·ªçc t·∫≠p v√† ƒë·ªùi s·ªëng. -	T·∫°o c∆° h·ªôi l√†m vi·ªác nh√≥m, giao l∆∞u, k·∫øt b·∫°n, t·∫°o s·∫£n ph·∫©m chung ƒë·ªÉ l∆∞u gi·ªØ k·ª∑ ni·ªám. -	C√¢u l·∫°c b·ªô hy v·ªçng s·∫Ω c√≥ c∆° h·ªôi h·ªó tr·ª£ gi√°o vi√™n trong c√¥ng t√°c chu·∫©n b·ªã b√†i gi·∫£ng Powerpoint, ch·ªânh s·ª≠a video, so·∫°n th·∫£o Word, Excel‚Ä¶trong kh·∫£ nƒÉng c·ªßa CLB, MIT cam k·∫øt s·∫Ω gi·ªØ k√≠n b√†i gi·∫£ng c·ªßa th·∫ßy c√¥. -	C√¢u l·∫°c b·ªô  MIT s·∫Ω h·ªó tr·ª£ tr∆∞·ªùng trong c√°c ho·∫°t ƒë·ªông truy·ªÅn th√¥ng, s·ª± ki·ªán ph√π h·ª£p v·ªõi s·ª© m√™Ã£nh v√† m·ª•c ti√™u c√¢u l·∫°c b·ªô ƒë·ªÅ ra.",
      "T√†i ch√≠nh": "-	C√¢u l·∫°c b·ªô ho·∫°t ƒë·ªông ch·ªß y·∫øu tr√™n n·ªÅn t·∫£ng m·∫°ng x√£ h·ªôi, trang th√¥ng tin truy·ªÅn th√¥ng tr·ª±c tuy·∫øn n√™n s·∫Ω kh√¥ng thu qu·ªπ CLB. -	N·∫øu c√≥ chi ph√≠ ph√°t sinh s·∫Ω th√¥ng b√°o cho th√†nh vi√™n CLB.",
      
      "Khen th∆∞·ªüng": "-	Nh·ªØng th√†nh vi√™n, nh√≥m th√†nh vi√™n c√≥ ƒë√≥ng g√≥p t√≠ch c·ª±c cho c√¢u l·∫°c b·ªô ƒë∆∞·ª£c ghi nh·∫≠n trong qu√° tr√¨nh tham gia c√°c ho·∫°t ƒë·ªông s·∫Ω ƒë∆∞·ª£c ban ƒëi·ªÅu h√†nh c√¢u l·∫°c b·ªô ƒë·ªÅ xu·∫•t v·ªõi BCH ƒêo√†n tr∆∞·ªùng THPT M·ªπ ƒê√¨nh khen th∆∞·ªüng.",
      "K·ª∑ lu·∫≠t": "-	Nh·ªØng th√†nh vi√™n vi ph·∫°m quy ch·∫ø t√πy theo m·ª©c ƒë·ªô s·∫Ω b·ªã k·ª∑ lu·∫≠t t·ª´ khi·ªÉn tr√°ch ƒë·∫øn khai tr·ª´ ra kh·ªèi c√¢u l·∫°c b·ªô ƒë∆∞·ª£c chia l√†m tr√™s m·ª©c k·ª∑ lu·∫≠t: +) M·ª©c 1: Nh·∫Øc nh·ªü  +) M·ª©c 2: K·ª∑ lu·∫≠t tr∆∞·ªõc to√†n c√¢u l·∫°c b·ªô +) M·ª©c 3: Khai tr·ª´ ra kh·ªèi c√¢u l·∫°c b·ªô  -	C√°c h√¨nh th·ª©c c·ªßa m·ª©c ƒë·ªô k·ª∑ lu·∫≠t C·ª• th·ªÉ do ban ƒëi·ªÅu h√†nh c√¢u l·∫°c b·ªô ƒë·ªÅ ra v√† to√†n th·ªÉ c√¢u l·∫°c b·ªô th·ªëng nh·∫•t tr√™n nguy√™n t·∫Øc bi·ªÉu quy·∫øt d√¢n ch·ªß v·ªõi s·ª± ƒë·ªìng √Ω t·ª´ 50% ch√≠nh th·ª©c tham gia bi·ªÉu quy·∫øt tr·ªü l√™n",
      
      "Ti√™u chu·∫©n H·ªôi vi√™n": "-	L√† h·ªçc sinh tr∆∞·ªùng THPT M·ªπ ƒê√¨nh ƒë·∫°t h·∫°nh ki·ªÉm T·ªët -	Kh√¥ng vi ph·∫°m ph√°p lu·∫≠t, n·ªôi quy nh√† tr∆∞·ªùng, ƒëi·ªÅu l·ªá c·ªßa c√¢u l·∫°c b·ªô.",
      "Quy·ªÅn l·ª£i c·ªßa H·ªôi vi√™n": "-	ƒê∆∞·ª£c tham gia c√°c ho·∫°t ƒë·ªông c·ªßa CLB    -	ƒê∆∞·ª£c ƒë·ªÅ xu·∫•t c√°c nguy·ªán v·ªçng, √Ω ki·∫øn ch√≠nh ƒë√°nh; ƒë∆∞·ª£c gi√∫p ƒë·ª° v√† t·∫°o ƒëi·ªÅu ki·ªán trong qu√° tr√¨nh tham gia sinh ho·∫°t.   -	ƒê∆∞·ª£c bi·ªÉu d∆∞∆°ng, khen th∆∞·ªüng khi c√≥ nh·ªØng ƒë√≥ng g√≥p t√≠ch c·ª±c, xu·∫•t s·∫Øc trong c√°c ho·∫°t ƒë·ªông c·ªßa CLB.",
      "Nghƒ©a v·ª• c·ªßa H·ªôi vi√™n": "-	T√¥n tr·ªçng v√† tu√¢n th·ªß ƒëi·ªÅu l·ªá, n·ªôi quy c·ªßa c√¢u l·∫°c b·ªô, gi·ªØ g√¨n t∆∞ c√°ch h·ªôi vi√™n     -	T√≠ch c·ª±c tham gia c√°c ho·∫°t ƒë·ªông c·ªßa c√¢u l·∫°c b·ªô, th·ª±c hi·ªán c√°c nhi·ªám v·ª• c·ªßa c√¢u l·∫°c b·ªô theo s·ª± ph√¢n c√¥ng c·ªßa ban ƒëi·ªÅu h√†nh     -	Th·ª±c hi·ªán c√¥ng t√°c tuy√™n truy·ªÅn nh·∫±m n√¢ng cao uy t√≠n v√† m·ªü r·ªông t·∫ßm ·∫£nh h∆∞·ªüng c·ªßa c√¢u l·∫°c b·ªô     -	Gi·ªõi thi·ªáu v√† ph√°t tri·ªÉn h·ªôi vi√™n m·ªõi",
      "ƒêƒÉng k√Ω l√†m H·ªôi vi√™n": "Ng∆∞·ªùi mu·ªën tr·ªü th√†nh h·ªôi vi√™n ch√≠nh th·ª©c c·ªßa c√¢u l·∫°c b·ªô ph·∫£i t·ª± nguy·ªán l√†m ƒë∆°n l√†m h·ªì s∆° theo m·∫´u quy ƒë·ªãnh c·ªßa t·ªï ch·ª©c. ƒê·ªìng th·ªùi ph·∫£i ƒë∆∞·ª£c ph·ª• huynh x√°c nh·∫≠n v√† ƒë·ªìng √Ω tham gia c√¢u l·∫°c b·ªô.",
      "R√∫t, x√≥a t√™n kh·ªèi CLB": "-	T·ª± nguy·ªán l√†m ƒë∆°n xin r√∫t kh·ªèi C√¢u l·∫°c b·ªô v√¨ l√Ω do c√° nh√¢n.    -	Th√†nh vi√™n kh√¥ng tham gia sinh ho·∫°t m√† kh√¥ng c√≥ l√Ω do ch√≠nh ƒë√°nh th√¨ b·ªã x√≥a t√™n trong danh s√°ch h·ªôi vi√™n.     -	Th√†nh vi√™n vi ph·∫°n quy ƒë·ªãnh v√† ƒëi·ªÅu l·ªá c·ªßa t·ªï ch·ª©c g√¢y ·∫£nh h∆∞·ªüng x·∫•u ƒë·∫øn uy t√≠n c·ªßa c√¢u l·∫°c b·ªô th√¨ b·ªã khai tr·ª´ ra kh·ªèi c√¢u l·∫°c b·ªô.",

      "ƒê∆°n ƒëƒÉng k√≠ tham gia CLB": "Li√™n h·ªá b·∫±ng Gmail: mydinhitclub@gmail.com ƒë·ªÉ nh·∫≠n t√†i li·ªáu",
      "ƒê∆°n xin r√∫t kh·ªèi CLB": "Li√™n h·ªá b·∫±ng Gmail: mydinhitclub@gmail.com ƒë·ªÉ nh·∫≠n t√†i li·ªáu",
      "N·ªôi quy CLB MIT": "Li√™n h·ªá b·∫±ng Gmail: mydinhitclub@gmail.com ƒë·ªÉ nh·∫≠n t√†i li·ªáu",
      "C√°ch tham gia CLB MIT": "Qua Link (ƒë∆∞·ª£c ƒëƒÉng ·ªü fanpage Facebook) ho·∫∑c ƒëƒÉng k√≠ tr·ª±c ti·∫øp qua qu·∫ßy(theo ƒë·ª£t)",
    };

    // H√†m hi·ªÉn th·ªã toast th√¥ng b√°o
    function showToast(message, duration = 3000) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      
      setTimeout(() => {
        toast.classList.remove('show');
      }, duration);
    }

    // X·ª≠ l√Ω form nh·∫≠p tin nh·∫Øn
    chatForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const question = userInput.value.trim();
      if (question) {
        handleUserQuestion(question);
        userInput.value = '';
        suggestions.style.display = 'none';
      }
    });

    // T√¨m ki·∫øm c√¢u h·ªèi
    function filterQuestions() {
      const searchTerm = searchInput.value.toLowerCase();
      const buttons = document.querySelectorAll('#questions button');
      
      buttons.forEach(button => {
        const text = button.textContent.toLowerCase();
        if (text.includes(searchTerm)) {
          button.style.display = 'block';
          // M·ªü details cha n·∫øu c√≥ k·∫øt qu·∫£ ph√π h·ª£p
          let parentDetails = button.closest('details');
          if (parentDetails) {
            parentDetails.open = true;
          }
        } else {
          button.style.display = 'none';
        }
      });
    }

    // G·ª£i √Ω c√¢u h·ªèi khi nh·∫≠p
    userInput.addEventListener('input', function() {
      const value = this.value.toLowerCase();
      if (value.length < 2) {
        suggestions.style.display = 'none';
        return;
      }
      
      const matches = [];
      for (const key in answers) {
        if (key.toLowerCase().includes(value)) {
          matches.push(key);
          if (matches.length >= 5) break;
        }
      }
      
      if (matches.length > 0) {
        suggestions.innerHTML = '';
        matches.forEach(match => {
          const div = document.createElement('div');
          div.className = 'suggestion-item';
          div.textContent = match;
          div.onclick = () => {
            askQuestion(match);
            userInput.value = '';
            suggestions.style.display = 'none';
          };
          suggestions.appendChild(div);
        });
        suggestions.style.display = 'block';
      } else {
        suggestions.style.display = 'none';
      }
    });

    // ƒê√≥ng g·ª£i √Ω khi click ra ngo√†i
    document.addEventListener('click', function(e) {
      if (!suggestions.contains(e.target) && e.target !== userInput) {
        suggestions.style.display = 'none';
      }
    });

    function handleUserQuestion(question) {
      // Hi·ªáu ·ª©ng t·∫£i
      const loadingMsg = createMessage("bot", "", false, true);
      
      // T√¨m c√¢u tr·∫£ l·ªùi ph√π h·ª£p nh·∫•t
      let bestMatch = null;
      let maxSimilarity = 0;
      
      for (const key in answers) {
        const similarity = calculateSimilarity(question, key);
        if (similarity > maxSimilarity) {
          maxSimilarity = similarity;
          bestMatch = key;
        }
      }
      
      // Ng∆∞·ª°ng t∆∞∆°ng ƒë·ªìng t·ªëi thi·ªÉu
      setTimeout(() => {
        if (maxSimilarity > 0.3) {
          // X√≥a th√¥ng b√°o ƒëang t·∫£i
          chat.removeChild(loadingMsg);
          askQuestion(bestMatch);
        } else {
          // Kh√¥ng t√¨m th·∫•y c√¢u tr·∫£ l·ªùi ph√π h·ª£p
          chat.removeChild(loadingMsg);
          createMessage("user", question);
          createMessage("bot", "Xin l·ªói, m√¨nh ch∆∞a c√≥ th√¥ng tin v·ªÅ c√¢u h·ªèi n√†y. Vui l√≤ng th·ª≠ l·∫°i v·ªõi c√¢u h·ªèi kh√°c ho·∫∑c li√™n h·ªá CLB MIT ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£.", true, true);
          history.push({question, answer: "Kh√¥ng c√≥ c√¢u tr·∫£ l·ªùi"});
          localStorage.setItem("chatHistory", JSON.stringify(history));
          updateHistory();
        }
      }, 800); // Delay ƒë·ªÉ hi·ªáu ·ª©ng t·∫£i hi·ªÉn th·ªã ƒë·ªß l√¢u
    }

    // H√†m t√≠nh ƒë·ªô t∆∞∆°ng ƒë·ªìng gi·ªØa hai chu·ªói (ƒë∆°n gi·∫£n)
    function calculateSimilarity(str1, str2) {
      const words1 = str1.toLowerCase().split(/\s+/);
      const words2 = str2.toLowerCase().split(/\s+/);
      
      let matchCount = 0;
      for (const word1 of words1) {
        if (words2.includes(word1)) {
          matchCount++;
        }
      }
      
      return matchCount / Math.max(words1.length, words2.length);
    }

    function typeWriterEffect(element, text, baseSpeed = 30) {
      let i = 0;
      element.innerHTML = "";
      function typing() {
        if (i < text.length) {
          element.innerHTML += text.charAt(i);
          i++;
          let speed = Math.max(10, baseSpeed - i / 3);
          setTimeout(typing, speed);
        }
      }
      typing();
    }

    function createMessage(role, text, animate = false, blink = false) {
      const messageDiv = document.createElement("div");
      messageDiv.classList.add("message", role);
      messageDiv.style.opacity = "0";
      messageDiv.style.transform = "translateY(20px)";

      const avatar = document.createElement("div");
      avatar.classList.add("avatar", role === "user" ? "user" : "bot");
      avatar.innerText = role === "user" ? "üë§" : "ü§ñ";

      const bubble = document.createElement("div");
      bubble.classList.add("bubble");

      messageDiv.appendChild(avatar);
      messageDiv.appendChild(bubble);
      chat.appendChild(messageDiv);

      // Hi·ªáu ·ª©ng xu·∫•t hi·ªán
      setTimeout(() => {
        messageDiv.style.transition = "opacity 0.3s, transform 0.3s";
        messageDiv.style.opacity = "1";
        messageDiv.style.transform = "translateY(0)";
      }, 10);

      if (role === "bot" && blink) {
        bubble.innerHTML = '<span class="loader"></span>';
        const delay = Math.floor(Math.random() * 1500) + 800;
        setTimeout(() => {
          bubble.innerHTML = "";
          if (animate) {
            typeWriterEffect(bubble, text);
          } else {
            bubble.innerText = text;
          }
        }, delay);
      } else {
        if (animate) {
          typeWriterEffect(bubble, text);
        } else {
          bubble.innerText = text;
        }
      }

      chat.scrollTop = chat.scrollHeight;
      return messageDiv;
    }

    function askQuestion(question) {
      const answer = answers[question] || "Xin l·ªói, m√¨nh ch∆∞a c√≥ c√¢u tr·∫£ l·ªùi cho c√¢u h·ªèi n√†y.";
      createMessage("user", question);
      const botMessage = createMessage("bot", answer, true, true);
      history.push({question, answer});
      localStorage.setItem("chatHistory", JSON.stringify(history));
      updateHistory();
      
      // L∆∞u tin nh·∫Øn bot cu·ªëi c√πng ƒë·ªÉ ƒë·ªçc
      localStorage.setItem("lastBotMessage", answer);
      
      // Haptic feedback tr√™n mobile (n·∫øu ƒë∆∞·ª£c h·ªó tr·ª£)
      if (navigator.vibrate) {
        navigator.vibrate(50);
      }
    }

    function updateHistory() {
      historyDiv.innerHTML = "";
      // Ch·ªâ hi·ªÉn th·ªã 10 m·ª•c g·∫ßn nh·∫•t
      const recentHistory = history.slice(-10);
      
      recentHistory.forEach((item, index) => {
        const btn = document.createElement("button");
        btn.innerText = item.question.length > 30 ? item.question.substring(0, 30) + "..." : item.question;
        btn.title = item.question;
        btn.onclick = () => showFromHistory(history.indexOf(item));
        historyDiv.appendChild(btn);
      });
    }

    function showFromHistory(index) {
      chat.innerHTML = "";
      const {question, answer} = history[index];
      createMessage("user", question);
      createMessage("bot", answer);
      
      // L∆∞u tin nh·∫Øn bot cu·ªëi c√πng ƒë·ªÉ ƒë·ªçc
      localStorage.setItem("lastBotMessage", answer);
    }

    function clearHistory() {
      if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch s·ª≠ tr√≤ chuy·ªán kh√¥ng?")) {
        history = [];
        localStorage.removeItem("chatHistory");
        historyDiv.innerHTML = "";
        chat.innerHTML = "";
        createMessage("bot", "ü§ñ Xin ch√†o, h√£y ch·ªçn c√¢u h·ªèi b√™n tr√°i ho·∫∑c nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n ƒë·ªÉ b·∫Øt ƒë·∫ßu!", true, true);
        showToast("ƒê√£ x√≥a l·ªãch s·ª≠ tr√≤ chuy·ªán");
      }
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark");
      localStorage.setItem("darkMode", document.body.classList.contains("dark"));
      
      // ƒê·ªïi icon
      const darkModeBtn = document.querySelector('.tool-btn[onclick="toggleDarkMode()"]');
      darkModeBtn.textContent = document.body.classList.contains("dark") ? "‚òÄÔ∏è" : "üåô";
      
      showToast(document.body.classList.contains("dark") ? "ƒê√£ b·∫≠t ch·∫ø ƒë·ªô t·ªëi" : "ƒê√£ t·∫Øt ch·∫ø ƒë·ªô t·ªëi");
    }
    
    function toggleLeft() {
      left.classList.toggle("collapsed");
      showToast(left.classList.contains("collapsed") ? "ƒê√£ ·∫©n danh s√°ch c√¢u h·ªèi" : "ƒê√£ hi·ªán danh s√°ch c√¢u h·ªèi");
    }
    
    function toggleRight() {
      right.classList.toggle("collapsed");
      showToast(right.classList.contains("collapsed") ? "ƒê√£ ·∫©n l·ªãch s·ª≠ tr√≤ chuy·ªán" : "ƒê√£ hi·ªán l·ªãch s·ª≠ tr√≤ chuy·ªán");
    }
    
    function toggleMobileLayout() {
      document.body.classList.toggle("mobile-layout");
      mobileBtn.textContent = document.body.classList.contains("mobile-layout") ? "üíª" : "üì±";
      showToast(document.body.classList.contains("mobile-layout") ? "ƒê√£ b·∫≠t ch·∫ø ƒë·ªô mobile" : "ƒê√£ t·∫Øt ch·∫ø ƒë·ªô mobile");
    }
    
    function speakCurrentMessage() {
      if (synth.speaking) {
        synth.cancel();
        showToast("ƒê√£ d·ª´ng ƒë·ªçc tin nh·∫Øn");
        return;
      }
      
      const lastBotMessage = localStorage.getItem("lastBotMessage") || "Kh√¥ng c√≥ n·ªôi dung ƒë·ªÉ ƒë·ªçc";
      if (lastBotMessage) {
        currentUtterance = new SpeechSynthesisUtterance(lastBotMessage);
        currentUtterance.lang = 'vi-VN';
        synth.speak(currentUtterance);
        showToast("ƒêang ƒë·ªçc tin nh·∫Øn...");
        
        currentUtterance.onend = function() {
          showToast("ƒê√£ ƒë·ªçc xong tin nh·∫Øn");
        };
      }
    }

    window.onload = () => {
      if (localStorage.getItem("darkMode") === "true") {
        document.body.classList.add("dark");
        const darkModeBtn = document.querySelector('.tool-btn[onclick="toggleDarkMode()"]');
        darkModeBtn.textContent = "‚òÄÔ∏è";
      }
      
      createMessage("bot", "ü§ñ Xin ch√†o! M√¨nh l√† MIT GPT, tr·ª£ l√Ω ·∫£o c·ªßa CLB C√¥ng ngh·ªá Th√¥ng tin tr∆∞·ªùng THPT M·ªπ ƒê√¨nh. H√£y ch·ªçn c√¢u h·ªèi b√™n tr√°i ho·∫∑c nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n ƒë·ªÉ b·∫Øt ƒë·∫ßu!", true, true);
      updateHistory();
      
      // Ki·ªÉm tra n·∫øu l√† thi·∫øt b·ªã di ƒë·ªông
      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        document.body.classList.add("mobile-layout");
        mobileBtn.textContent = "üíª";
      }
    };
  </script>
</body>
</html>